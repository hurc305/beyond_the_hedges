<!doctype><html><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>HURC305 Template</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" type="image/x-icon" href="http://cartodb.github.io/odyssey.js/sandbox/favicon.png">
  <link rel="icon" type="image/png" href="http://cartodb.github.io/odyssey.js/sandbox/favicon.png">

  <link rel="stylesheet" href="http://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/themes/css/cartodb.css">
  <link rel="stylesheet" href="http://cartodb.github.io/odyssey.js/sandbox/css/slides.css">
  <link rel="stylesheet" href="css/custom_style.css" type="text/css" media="screen">
  
  <script src="http://cartodb.github.io/odyssey.js/vendor/modernizr-2.6.2.min.js"></script>
</head>
<body>
  <div id="map" style="width: 100%; height: 100%;"></div>

  <div id="slides_container" style="display:block;">
    <ul id="navButtons">
      <li><a class="prev"></a></li>
      <li><a class="next"></a></li>
    </ul>
	<div id="dots"></div>
    <div id="slides"></div>
  </div>

<!-- layer selector div that is populated when layer loads-->
<div id="lselect" class="layer_selector">
			<p>LAYERS</p>
            <ul class="LayerSelector-list">
            </ul>
        </div>

  <div id="credits">
    <span class="title" id="title">Beyond The Hedges</span>
    <span class="author"><strong id="author">HURC305 | Fall 2015</strong> <a href="http://cartodb.github.io/odyssey.js/">Odyssey.js</a><span>
  </span></span></div>
<a href="odyssey_template.html" id="" title="odyssey_template">odyssey_template</a>
  <script src="http://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/cartodb.js"></script>
  <script src="http://cartodb.github.io/odyssey.js/dist/odyssey.js" charset="UTF-8"></script>

  <script>
  //----GLOBAL VARIABLES-----\\
  var sublayers = [];
  var layerCount = 0;

	var resizePID;

    function clearResize() {
      clearTimeout(resizePID);
      resizePID = setTimeout(function() { adjustSlides(); }, 100);
    };

    if (!window.addEventListener) {
      window.attachEvent("resize", function load(event) {
        clearResize();
      });
    } else {
      window.addEventListener("resize", function load(event) {
        clearResize();
      });
    };

    function adjustSlides() {
      var container = document.getElementById("slides_container"),
          slide = document.querySelectorAll('.selected_slide')[0];

      if (slide) {
        if (slide.offsetHeight+169+40+80 >= window.innerHeight) {
          container.style.bottom = "80px";

          var h = container.offsetHeight;

          slide.style.height = h-169+"px";
          slide.classList.add("scrolled");
        } else {
          container.style.bottom = "auto";
          container.style.minHeight = "0";

          slide.style.height = "auto";
          slide.classList.remove("scrolled");
        }
      }
    };

    var resizeAction = O.Action(function() {
      function imageLoaded() {
        counter--;

        if (counter === 0) {
          adjustSlides();
        }
      }
      var images = $('img');
      var counter = images.length;

      images.each(function() {
        if (this.complete) {
          imageLoaded.call( this );
        } else {
          $(this).one('load', imageLoaded);
        }
      });
    });
	

    function click(el) {
      var element = O.Core.getElement(el);
      var t = O.Trigger();

      //TODO: clean properly
      function click() {
        t.trigger();
      }

      if (element) element.onclick = click;

      return t;
    };
	
	// function to add HTML to layer selector
	function createSelector(l_id,lname,slayer){
		$('#lselect ul').append('<li class="layer-toggle" id ='+l_id+'>'+lname+'<span style = "font-size:80%; color:gray;"> ('+l_id+')</span></li>');
		$('#'+l_id).click(function(){
			slayer.toggle();
		});
	}

    O.Template({
      init: function() {
		var seq = O.Triggers.Sequential();

        var baseurl = this.baseurl = 'http://{s}.api.cartocdn.com/base-light/{z}/{x}/{y}.png';
        var map = this.map = L.map('map').setView([0, 0.0], 4);
        var basemap = this.basemap = L.tileLayer(baseurl, {
          attribution: 'data OSM - map CartoDB'
        }).addTo(map);

        // enanle keys to move
        O.Keys().on('map').left().then(seq.prev, seq)
        O.Keys().on('map').right().then(seq.next, seq)
		
		//log lat and lon of mouse click on map -- can/should be disabled
		map.on('click', function(e) {
		    console.log("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng);
			console.log("Zoom: " + this.getZoom());
		});
        
		click(document.querySelectorAll('.next')).then(seq.next, seq)
        click(document.querySelectorAll('.prev')).then(seq.prev, seq)

        var slides = O.Actions.Slides('slides');
        var story = O.Story()

        this.story = story;
        this.seq = seq;
        this.slides = slides;
        this.progress = O.UI.DotProgress('dots').count(0);
      },

      update: function(actions) {
		var self = this;
        if (!actions.length) return;

        this.story.clear();

        if (this.baseurl && (this.baseurl !== actions.global.baseurl)) {
          this.baseurl = actions.global.baseurl || 'http://0.api.cartocdn.com/base-light/{z}/{x}/{y}.png';

          this.basemap.setUrl(this.baseurl);
        }

        if (this.cartoDBLayer && ("http://"+self.cartoDBLayer.options.user_name+".cartodb.com/api/v2/viz/"+self.cartoDBLayer.options.layer_definition.stat_tag+"/viz.json" !== actions.global.vizjson)) {
          this.map.removeLayer(this.cartoDBLayer);
		  //alert("map removed?");
          this.cartoDBLayer = null;
          this.created = false;
        }
		
        if (actions.global.vizjson && !this.cartoDBLayer) {
          if (!this.created) { // sendCode debounce < vis loader
            cdb.vis.Loader.get(actions.global.vizjson, function(vizjson) {
              self.map.fitBounds(vizjson.bounds);

              cartodb.createLayer(self.map, vizjson)
                .done(function(layer) {
				  self.cartoDBLayer = layer;
				  
				  /*
				  var scount = layer.getSubLayerCount();
				  for (i=0; i<scount; i++){
					  lname = layer.layers[i].options.layer_name;
					  sublayers.push(i);
					  layer.getSubLayer(i).hide();
				  };
				  */
				  
				  //add information to layer selector
				  layerCount += 1
				  for (var i = 0; i < layer.getSubLayerCount(); i++) {
					  var sublayer = {
						  				id:"",
						  				name:"",
						  				author:"",
						  				slayer:"",
						  				parent:""
						  				
					  }
					  sublayer.slayer = layer.getSubLayer(i);
					  sublayer.id = layerCount+"_"+i;
					  sublayer.name = layer.options.layer_definition.layers[i].options.layer_name;
					  sublayer.author = "Bob";	//TODO: Make this author's name
					  createSelector(sublayer.id,sublayer.name,sublayer.slayer);
					  sublayer.slayer.hide();
						
					  //add layer to the sublayers array
					  sublayers.push(i);		
							}
				  
				 // ADDED an action to the O.Parallel actions under _resetActions below
				 // This is probably not an ideal hack, but avoids having to dig into the Odyssey.JS source code
				 // uses CSS to hide h5 elements from the markdown (#####) where visible layers are stored
				 // jQuery used to retrieve the values and compare them against the  array of sublayers
 				 toggleLayer = function toggleLayer() {
 				    return O.Action({
 				      enter: function() {
 						  /*
						  layer.getSubLayer(tl).show();
						  var lhide;
						  for (lhide in sublayers){
							  if (lhide != tl){layer.getSubLayer(lhide).hide();};
						  }*/
						  var vlayers = $(".selected_slide h4");
						  var hlayers = $(".selected_slide h5");
						  vlayers.each(function(){
							  tl = $(this).text();
							  layer.getSubLayer(tl).show();
							  console.log(tl);
						  });
						  hlayers.each(function(){
							  tl = $(this).text();
							  layer.getSubLayer(tl).hide();
							  console.log(tl);
						  });
					  }
 				    });
 				  }
				/*  
				var sublayer = layer.getSubLayer(0),
                      layer_name = layer.layers[0].options.layer_name,
                      filter = actions.global.cartodb_filter ? " WHERE "+actions.global.cartodb_filter : "";
					  
			 	sublayer.setSQL("SELECT * FROM "+layer_name+filter);
				sublayer.hide();
                */  
				  self.map.addLayer(layer);

                  self._resetActions(actions);
                }).on('error', function(err) {
                  console.log("some error occurred: " + err);
                });
            });

            this.created = true;
          }

          return;
        }

        this._resetActions(actions);
      },

      _resetActions: function(actions) {
        // update footer title and author
        var title_ = actions.global.title === undefined ? '' : actions.global.title,
            author_ = actions.global.author === undefined ? 'Using' : 'By '+actions.global.author+' using';

        document.getElementById('title').innerHTML = title_;
        document.getElementById('author').innerHTML = author_;
        document.title = title_ + " | " + author_ +' Odyssey.js';

        var sl = actions;
 	   
        document.getElementById('slides').innerHTML = ''
        this.progress.count(sl.length);

        // create new story
        for(var i = 0; i < sl.length; ++i) {
          var slide = sl[i];
          var tmpl = "<div class='slide' style='diplay:none'>";
		  
          tmpl += slide.html();
          tmpl += "</div>";
          document.getElementById('slides').innerHTML += tmpl;

          this.progress.step(i).then(this.seq.step(i), this.seq)
		  //var visible_layer = i;//temporary, this should be set to layer from viz.json
          var actions = O.Parallel(
            this.slides.activate(i),
            slide(this),
            this.progress.activate(i),
            resizeAction,
			toggleLayer()
          );

          actions.on("finish.app", function() {
            adjustSlides();
          });

          this.story.addState(
            this.seq.step(i),
            actions
          )
        }

        this.story.go(this.seq.current());
	  	
		
	    
		},

      changeSlide: function(n) {
        this.seq.current(n);
      }
	}	); 
  </script>

  <script>
    /*(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-20934186-21', 'cartodb.github.io');
    ga('send', 'pageview');*/
  </script>
<!-->
  <script type="text/javascript" src="http://fast.fonts.net/jsapi/3af16084-ba56-49ca-b37d-0b49b59e1927.js"></script>
-->
<script id="md_template" type="text/template">
```
-title: "Breaking: into urban spaces"
-author: "Amber Tong"
- vizjson: "https://pt15.cartodb.com/api/v2/viz/3b16a74a-938d-11e5-b911-0e787de82d45/viz.json"
```

#BREAKING 
```
- center: [30.150723, -101.568422]
- zoom: 1
```
#### 0
#### 1
#### 2
#### 3



To claim that news takes up urban space seems reasonable enough. After all, newsstands are a common feature of any metropolitan area; one cannot walk through the streets of a city without spotting a newspaper somewhere - at a convenient store, in a curbside newspaper machine, or on a subway seat. Besides, it is not mere coincidence that all major cities seem to have at least one reputable news source. 

Media theorist Shanoon Mattern argues that “the birth of cities is rooted in not (or not only) in economics, which is a prevailing theory, but in the need for ceremony and communication”. On top - or rather, in the process - of bringing cities together, such need for communication also inspired the creation of newspapers. In this sense, news is one of the blocks on which urban spaces are built upon.

With the advantage of being cheap, widely available and timely, newspaper is one of the most ubiquitous sources of information. While Cameron Blevins was writing about 1900s Houston, these unique characteristics of newspaper still rings true today. Indeed, with the advance of the World Wide Web, people can access information from a variety of sources. Nevertheless, news agencies, for the most part, still seems to possess exclusive omnipresence and - to a varying degree - credibility. Few websites are more commonly known than big paper names. If readers have doubts about a certain paper’s coverage on some event, they would probably consult another paper, rather than leaving the realm of newspapers altogether. All this to say that the influence of newspaper is significant, even in an era when journalism seems to be in decline. 

#Into Houston
```
- center: [29.765934, -95.358]
- zoom: 11
```
##### 1
##### 2
##### 3
![Houston](https://c2.staticflickr.com/4/3169/2280454733_ca225e07b8_b.jpg)
Welcome to - Houston City? The Greater Houston Area? The definition of the space itself is confusing. The former gives limited data for maps, but the latter is too diffused. Further, there is a lack of centralized catalog of the multiple newspapers in Houston, not to mention decent historic narratives. According to some accounts and based on the broadest definition of the Greater Houston area, it has over 13 active English print news sources. Some of them, however, explicitly serve only a part of Houston, which makes it difficult to determine which papers to include when talking about “Houston newspapers”. 

#News Stories
```
- center: [29.765934, -95.358]
- zoom: 10
```
##### 0
#### 1
#### 2
#### 3


![Chron new](https://www.myhearstnewspaper.com/images/houstonlogo.png)

The [Houston Chronicle](http://www.chron.com/), founded in 1901 and incorporating The Houston Post in 1995, is one of the oldest and largest news agencies and therefore seems to be a reliable case to study. An in-depth inquiry of the history of news agencies in Houston, though, will be beneficial if not necessary for a legitimate investigation on how newspapers have been constructing and continue to construct urban spaces.


![Chron](https://upload.wikimedia.org/wikipedia/commons/d/d6/Houston_Chronicle_frontpage.jpg)

#Imagined Geography
```
- center: [ 29.800804873368484, -95.32399177]
- zoom: 14
```
#### 0
##### 1
##### 2
#### 3

Among the types of information newspaper convey is geographic information. By telling stories and facts about certain places in a certain way, newspapers create an “imagined geography” in readers’ minds. This geography can be of any scale, ranging from local, municipal, state-wide, national to global. This is not to say every reader of the same newspaper has the same conception of urban space, but that newspaper plays an important role in shaping their imagination. This role is subtle, incremental but powerful when reinforced on a day-to-day basis. 

The sheer frequency that a city is mentioned can give readers a sense of how important that city is. The types of stories associated with a neighborhood suggests a certain personality about the place and the people that live in it. The scale that an article adopts limits not only readers’ spatial knowledge but also the way they position the space concerned in relation with the rest of the world as they know it. As Richard Howitt suggests, places have different significance in different scale contexts as their relations change. 

#Imagining Geography
```
- center: [29.757898, -95.359368]
- zoom: 15
```
#### 0
##### 1
#### 2
#### 3

Most interestingly, as Blevins points out, imagined geography does not always align with “actual geography”. While the idea of “reality” itself can be contested, newspapers undeniably emphasize certain places in the expense of others. In other words, there are spaces that actually exist but are not recognized in the imagined geography that newspapers are constructing. Blevins gives the example of the Houston Daily Post, which dedicates a column to little updates about the midwestern railroad network but says nothing about the Southeastern network. As Blevins puts it, newspaper reporting serves both as a mirror and handmaiden of the contemporary power system. Instead of passively reflecting the reality about urban spaces, it helps create it by reinforcing certain parts.

#Reality in ma(p/k)ing
```
- center: [29.757224408272688, -95.37300109863281]
- zoom: 10
```

##### 0
#### 1
##### 2
##### 3
While individual news articles seem to represent urban spaces in a discrete, piece-by-piece manner, they are in fact never perceived as such. To quote anthropologist of news Elizabeth Bird, “people do not evaluate news stories in isolation but incorporate them into their already established worldviews”. That is, although people do read news one article at a time, the geographical information that they acquire with each new story interacts with their previous knowledge before being accepted into their database. The concrete process in which that happens belong to a psychological realm that I am not planning to explore, but the fact that newspaper-reading is often a daily occurrence renders it more plausible. The established worldviews may even be built in part on previous news stories that readers have read. While not all readers would deliberate trace all coverage of an event as detailed as Skinner did in his case study of Montserrat (not everyone is an anthropologist), they may naturally be undergoing a similar process in terms of watching the story develop and new reports erupt as time progresses. People’s understanding of the imagined geography through newspaper, then, also has a temporal dimension. 

#References
```
- center: [29.757224408272688, -95.37300109863281]
- zoom: 10
```
#### 0
#### 1
#### 2
#### 3

I came into Houston as an outsider, vulnerable to media portrayal of the city. Having undergone this project, however, and having lived here for two years, I feel like I have some claim to an insider perspective. Now that you have explored the map, I invite you to join me in this liminal position, starting to imagine the landscape while being critical about what is feeding into your imagination.

###References

Mattern, Shannon Christine. Deep Mapping the Media City. Minneapolis, MN: University of Minnesota Press, 2015.

Blevins, Cameron. “Space, Nation, and the Triumph of Region: A View of the World from Houston”. The Journal of American History Jun. 2014: 122-147.

Howitt, Richard. “Scale as relation: musical metaphors of geographical scale”. Area 1998 30.1: 49-58.

Bird, Elizabeth. “Introduction” The Anthropology of News and Journalism. Ed. Elizabeth Bird. Bloomington, IN: Indiana University Press, 2010. 

Skinner, Jonathan. “Mount Chance, Montserrat, and the Media” The Anthropology of News and Journalism. Ed. Elizabeth Bird. Bloomington, IN: Indiana University Press, 2010. 


</script>

</body></html>
